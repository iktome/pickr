(function($){$.fn.flickr=function(o){var s={api_url:null,callback:null,api_key:null,type:null,photoset_id:null,user_id:null,group_id:null,tags:null,tag_mode:null,text:null,sort:null,thumb_size:'s',size:null,per_page:null,page:null,litebox:false};if(o)$.extend(s,o);return this.each(function(){var list=$('<ul>').appendTo(this);var url=$.flickr.format(s);$.getJSON(url,function(r){if(r.stat!="ok"){for(i in r){$('<li>').text(i+': '+i[r]).appendTo(list);list.append('<li>'+i+': '+i[r]+'</li>');}}else{if(s.type=='photoset'){r.photos=r.photoset;}
for(var i=0;i<r.photos.photo.length;i++){var photo=r.photos.photo[i];var t='http://farm'+photo['farm']+'.static.flickr.com/'+photo['server']+'/'+photo['id']+'_'+photo['secret']+'_'+s.thumb_size+'.jpg';var h='http://farm'+photo['farm']+'.static.flickr.com/'+photo['server']+'/'+photo['id']+'_';if(!s.size)h+=photo['secret']+'.jpg';else if(s.size=='o')h+=photo['originalsecret']+'_o.'+photo['originalformat'];else h+=photo['secret']+'_'+s.size+'.jpg';list.append('<li><a href="'+h+'"><img src="'+t+'" alt="'+photo['title']+'" /></a></li>');}
if(s.litebox)list.litebox();}});});};$.flickr={format:function(s){if(s.url)return s.url;if(!s.callback)s.callback='?';var url='http://api.flickr.com/services/rest/?format=json&jsoncallback='+s.callback+'&api_key='+s.api_key;switch(s.type){case'photoset':url+='&method=flickr.photosets.getPhotos&photoset_id='+s.photoset_id;break;case'search':url+='&method=flickr.photos.search';if(s.user_id)url+='&user_id='+s.user_id;if(s.group_id)url+='&group_id='+s.group_id;if(s.tags)url+='&tags='+s.tags;if(s.tag_mode)url+='&tag_mode='+s.tag_mode;if(s.text)url+='&text='+s.text;if(s.sort)url+='&sort='+s.sort;break;default:url+='&method=flickr.photos.getRecent';}
if(s.per_page)url+='&per_page='+s.per_page;if(s.page)url+='&page='+s.page;if(s.size=='o')url+='&extras=original_format';return url;}};})(jQuery);